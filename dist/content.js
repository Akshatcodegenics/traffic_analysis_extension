(()=>{function e(){var e={url:window.location.href,domain:window.location.hostname,title:document.title,timestamp:Date.now()};chrome.runtime.sendMessage({type:"PAGE_VISIT",data:e}),chrome.storage.local.get(["visitedSites"],function(t){var i=t.visitedSites||[];i.unshift(e),i.length>10&&i.splice(10),chrome.storage.local.set({visitedSites:i})})}var t=window.location.href;e(),setInterval(function(){t!==window.location.href&&(t=window.location.href,e())},1e3),window.addEventListener("popstate",e),window.addEventListener("pushstate",e),window.addEventListener("replacestate",e)})();