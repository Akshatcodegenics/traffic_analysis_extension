chrome.runtime.onMessage.addListener(function(e,t,a){"PAGE_VISIT"===e.type&&(console.log("Page visited:",e.data.url),a({status:"received"}))}),chrome.tabs.onUpdated.addListener(function(e,t,a){if("complete"===t.status&&a.url){console.log("Tab updated:",a.url);var o={url:a.url,title:a.title,timestamp:Date.now()};chrome.storage.local.get(["recentTabs"],function(e){var t=e.recentTabs||[];t.unshift(o),t.length>20&&t.splice(20),chrome.storage.local.set({recentTabs:t})})}});